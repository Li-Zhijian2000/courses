云游戏
=====

由于 Internet 的高普及率以及使用云计算技术来构建大型数据中心的缘故，瘦客户机近年来越来越受欢迎。用户将工作负载转移到拥有大量计算/存储资源的远程服务器，使得瘦客户端比传统的胖客户端更方便，功能也更强大。今天，人们通过瘦客户端访问远程计算机来工作和娱乐已经相当普遍。

在「all in cloud」的趋势下，「云游戏」顺理成章地成为了一个热词，其概念是利用云技术让游戏软件的资料和运算都放置于云端，使用者不需要游戏下载和性能强劲的游戏机，通过网络就可以直接进行游戏。

云游戏与流视频有很多共同点。本质上，云游戏就是交互式的流媒体视频服务。云游戏服务器运行游戏并播放游戏视频，键盘，鼠标和控制器接受操作将通过网络发送到云游戏服务器。

1，云游戏的优点
-----------

理论上讲，云游戏具有很多优势：

* 无需进行昂贵的硬件投资或升级。借助云游戏，用户无需升级 PC 或主机，使用现有的硬件即可。甚至可以只购买便宜的流媒体盒和控制器，从而在电视上进行云游戏。
  
* 在任何操作系统或设备上玩游戏。目前，大多数高端非移动游戏都只能在 PC（通常是 Windows ）或控制台。云游戏将使游戏独立于平台，从而允许运行 Mac，Linux，Android，iOS，Chrome OS，Windows RT 和其他操作系统的 终端玩只在 Windows 上运行的游戏。

* 即时播放。某些游戏可能需要下载 10GB，20GB 甚至更多的文件才能运行。借助云游戏，用户可以立即开始玩游戏。

* 轻松观看。云游戏服务将允许用户非常轻松地观看像专业比赛之类的游戏的视频。观众不需要安装游戏，因为视频流可以轻易地复制给许多用户。

* 数字版权管理（Digital Rights Management，DRM）。如果游戏在远程服务器而不是用户的计算机上运行，​​则几乎不可能盗版。

2，云游戏的缺点
-----------

但是，云游戏存在一些重大缺点：

* 视频压缩 - 和我们在 YouTube 或 Netflix 上观看的视频被压缩以减少占用的带宽一样，从云游戏服务接收的游戏「视频」也会被压缩，不会像高端游戏 PC 所呈现得那样清晰和高细节。
  
* 带宽限制 - 云游戏服务需要大量带宽。在 OnLive 上玩游戏需要 10MBps 的带宽。而 Internet 连接上是有带宽上限的。如果有很多人都使用云服务来玩游戏，所需的带宽将远远超过现有基础设施所能提供的带宽。
  
* 无法解决的高延迟 - 传统游戏里玩家做出操作后，就立即在本地机上完成渲染，让玩家能立即看到操作反馈；同时，这个信号通过网络传输给服务器，等待服务器响应——如果这个响应和本地预测相同，那就不理它；否则就要重新渲染。所以

  $$传统游戏延迟 = max\{响应延迟，网络延迟\}$$

  但是云游戏的所有计算都是在云端进行的，玩家的操作必须通过网络传送给服务器后再传送回本地。同时，视频压缩也需要时间（想象一下，如果不压缩直接传，每幅 1080p 画面就是一幅 6M 的高清大图，视频一般是 24 帧/s ），因此  
  $$云游戏延迟 = 响应延迟 + 网络延迟 + 视频压缩时间$$

  尽管服务端往往硬件性能强于本地机，使得云游戏的响应延迟低于传统游戏的响应延迟，但这并不足矣弥补差距，所以云游戏服务将始终比功能强大的本地硬件具有更多的延迟。

3，今日之云游戏
-----------

在讨论 5g 时代的云游戏之前，我们先来谈谈有线网下的云游戏。5g 基站与服务器之间仍要以光纤相连，所以 5g 的所谓「低延迟、高带宽」并不会优于有线网。

在 2019 年，由于基础设施的提升，带宽早已不是限制。

> The average download speed for American households using broadband internet in 2018 was 96.25 Mbps, according to Ookla, a firm that monitors and analyzes internet throughput. The global average is less than half of that, at 46.12 Mbps. 

> Streaming Stadia in 4K require an internet speed of at least 35 Mbps; Google's recommended minimum for using Stadia is 10 Mbps, which will deliver 720p video with stereo sound.

可以看到，全球平均的带宽可以达到 46.12 Mpbs，这一数字甚至已经超过了 4K 流视频所需要的带宽。也正因为带宽的增大，云服务提供商可以提供更低压缩比率的游戏内容，这意味着其清晰度和细节也足以满足绝大多数玩家的要求。

那么现在延迟也能满足云游戏所需吗？

首先是编解码。近年来，AMD，NVIDIA 已经在其显卡里集成了 H.264/H.265 的编码模块，使得编解码的延迟大大降低，目前可低至 5~10ms 。

至于网络延迟，目前可能的解决方法是在多个省份架设服务器，使得用户可以做到 ping 同城同运营商的服务器，以最高限度地降低网络延迟。

另一方面，普通游戏玩家对延迟并没有职业玩家那么敏感，下图是 PS4 和 Xbox 玩家可以容忍的最大响应延迟：

![](https://pic1.zhimg.com/437951f0ee7873fffaec43c19726728b_r.jpg)

可以看到，即使是 FPS 游戏，普通玩家仍然可以容忍 80~100ms 的延迟。这意味着云游戏的网络延时只要低于 60ms ，便可以满足普通玩家的需求，而这一条件是不难达到的。

4，云游戏在 5G 时代的展望
--------------------

> 「 5G 提供的高带宽和低延迟特性可以显着改善移动游戏体验，进一步提高游戏质量，并促进VR和AR的发展。此外，由于 5G 需要具有低延迟（小于 70ms）的稳定网络，因此 5G 还将促进云游戏的兴起。」——胡志鹏

与 PC 游戏相比，移动游戏更具有发展云游戏的前景。
* 手机硬件与 PC 相比较为弱小，同时由于功耗的制约，手机很难提供非常出色的游戏画质。特别对于 VR/AR ，手机不具有渲染高质量画面的能力，5g 就能释放 AR/VR 游戏的全部潜力。在 5g 覆盖较完备的韩国首尔，20% 的 5g 流量用于 VR/AR 游戏。
* 手机存储单价较高。与 PC 动辄 1T 的硬盘相比，一般只有 128GB ROM 的手机的存储空间更为宝贵。因此不占用本地存储空间的云游戏能带给玩家更丰富的体验。
